<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <title>Being - Curver</title>
    <link rel="stylesheet" type="text/css" href="static/reset.css">
    <link rel="stylesheet" type="text/css" href="static/main.css">
    <link href="static/font/material-icons.woff2" type="font/ttf">
    <link href="static/font/OpenSans-Regular.ttf" type="font/ttf">
    <script type="module" src="static/curver/live_plotter.js"></script>
    <script type="module" src="static/curver/spline_editor.js"></script>
    <style>
        #plotter {
            width: 100%;
            height: 30vh;
        }

        #editor {
            width: 100%;
            height: 50vh;
        }
    </style>
</head>

<body>
    <nav>
        <ul>
            <li><a href="#plotter">plotter</a></li>
            <li><a href="#editor">editor</a></li>
            <li><a href="#settings">settings</a></li>
        </ul>
    </nav>

    <h1>Behavior</h1>

    <h1>Plotter</h1>

    <being-plotter id="plotter"></being-plotter>

    <h1>Spline Editor</h1>

    <being-editor id="editor"></being-editor>

</body>
<script type="module">
    import { ready } from "/static/js/utils.js";
    import { receive_from_websocket } from "/static/js/web-socket.js";
    import { fetch_json } from "/static/js/utils.js";

    const host = window.location.host;

    async function main() {
        /*
        const url = "http://" + host + "/api/motors";
        const data = await fetch_json(url);
        console.log(data);
        const plotter = document.getElementById("plotter");
        const editor = document.getElementById("editor");
        */
        const streamUrl = 'ws://' + host + '/stream';
        receive_from_websocket(streamUrl, {
            "output-values": [
                msg => plotter.new_data(msg),
                msg => editor.new_data(msg),
            ],
        });
    }

    ready(main);
</script>

</html>
